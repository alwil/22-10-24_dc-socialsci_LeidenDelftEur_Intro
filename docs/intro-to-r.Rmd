---
title: "Intro to R"
author: "Aleksandra Wilczynska"
date: "2022-10-25"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(
	echo = TRUE,
	message = FALSE,
	warning = FALSE
)

# Load libraries ----------------------------------------------------------
# Package names
packages <- c("tidyverse", "here")

# Install packages not yet installed
installed_packages <- packages %in% rownames(installed.packages())
if (any(installed_packages == FALSE)) {
  install.packages(packages[!installed_packages])
}

# Packages loading
invisible(lapply(packages, library, character.only = TRUE))
```

# Introduction to RStudio

## Why R?

- It is a **free** and **open-source** programming language/software! 
- It was created by statisticians for **statistics** 
- It's script-based, hence great for **reproducibility** 

## Why RStudio?
- RStudio is an integrated development environment (IDE)
- It provides a (much prettier) interface for the R software
- R is integrated into RStudio, so you never actually have to open R 

## Default layout

- Entire Left / Bottom Left : **R console** (what R would look and be like without RStudio)
- Top right: **Environment/History** (look here to see what you have done)
- Bottom Right: Files/Plots/Packages/Help/Viewer (see the contents of the project/working directory)

![](../assets/img/01-rstudio.png)

- Top left: Once you open files, such as R scripts, an editor panel will also open in the top left.

![](../assets/img/02-rstudio.png)
## Project management 

R Studio gives a functionality of creating projects: self-contained working space (i.e. working directory), to which R will refer to, when looking for and saving files.

Weâ€™re going to create a new project in RStudio:

- `File` 
- `New Project` 
- `Empty project` 
- browse for directory where you want to keep it 
- type **r-geospatial** as the name of the project 
-`Create project`

### Organising your

This is one suggestion of how your R project can look like. Let's go ahead and create the folders. 

![](../assets/img/rstudio_project_files.jpeg)
- **data/** Use this folder to store your raw data and intermediate datasets. For the sake of transparency and provenance, you should always keep a copy of your raw data accessible and do as much of your data cleanup and preprocessing programmatically (i.e., with scripts, rather than manually) as possible.
- **data_output/** When you need to modify your raw data, it might be useful to store the modified versions of the datasets in a different folder.
- **documents/** Used for outlines, drafts, and other text.
- **fig_output/** This folder can store the graphics that are generated by your scripts.
- **scripts/** A place to keep your R scripts for different analyses or plotting.

### Two main ways to interact with R

- Test and play within the interactive R console (chat)
    - Pros: immediate results
    - Cons: work lost once we close RStudio
    
- Start writing in an .R file ( email )
    - File still will be executed in the console
    - Pros: complete record of what you did!
    - Cons: Can be messy if we're just want to print things out

### Running the code

- In the console: `Enter`
- In the script:
   - `Ctrl` + `Enter` 
   - `Run` button on right left - current line or selection

### Creating a script
We're going to work with a script. Let's create one now and save it in the `scripts` directory.

- `File` 
- `New File` 
- `R Script` 
- A new `Untitled` script will appear in the source pane. Save it using floppy disc icon.
- Name it `intro-to-r.R`

### Escaping 

The console shows it's ready to get new commands with `>` sign. It will show `+` sign if it still requires input for the command to be executed. 

Sometimes you don't know what is missing/ you change your mind and want to run something else, or your code is running much too long and you just want it to stop. The way to do it is to hit `Esc`.

### Packages 

A great power of R lays in packages add-on sets of functions that are build by the community and once they go through a quality process they are available to download from a repository called CRAN. They need to be explicitly activated. 
Now, we will be using `tidyverse` package, which is actually a collection of useful packages. 

If you have have not installed this package earlier, please do so. You can check if you have it installed in the `Packages` pane in the bottom-right window.

```{r install-package, eval=FALSE}
install.packages('tidyverse')
```

# Introduction to R

## Create objects 

R can be used as a calculator:
```{r}
3 + 5

12 / 7
```

But often we need to use the same value over and over again. For this we can save/assign a value to an object/variable. To do that we use the `<-` assignment operator.

```{r}
area_hectares <- 1.0 # assign

area_hectares # print to console
```

<div class="alert alert-info">
<strong>Naming convention </strong> 



You can name your objects almost freely. There are some rules you **have to** follow and there some that you **should**. 
- You can use letters, numbers, underscores. 
- Object name should start with a letter
- R is case sensitive so `age` and `Age` are two different objects
- It is allowed to use `.` to separate words in an object name, but you should avoid it
- You can pick your naming convention like, but stick to it. 

I will stick to using lower-case letters and underscores to separate names

</div>

```{r}
2.47 * area_hectares
```


<div class="alert alert-info">
<strong>Autocompletion</strong> 
RStudio offers auto-completion.

You can press tab to complete the name with the name you want
</div>
